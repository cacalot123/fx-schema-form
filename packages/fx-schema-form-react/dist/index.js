!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("recompose"),require("immutable"),require("fx-schema-form-core"),require("react-redux"),require("resolve-pathname"),require("redux-act"),require("reselect"),require("redux"),require("ajv")):"function"==typeof define&&define.amd?define("SchemaFormReact",["react","recompose","immutable","fx-schema-form-core","react-redux","resolve-pathname","redux-act","reselect","redux","ajv"],t):"object"==typeof exports?exports.SchemaFormReact=t(require("react"),require("recompose"),require("immutable"),require("fx-schema-form-core"),require("react-redux"),require("resolve-pathname"),require("redux-act"),require("reselect"),require("redux"),require("ajv")):e.SchemaFormReact=t(e.React,e.recompose,e.Immutable,e.SchemaFormCore,e["react-redux"],e["resolve-pathname"],e["redux-act"],e.reselect,e.Redux,e.Ajv)}("undefined"!=typeof self?self:this,function(e,t,r,n,o,a,i,u,c,s){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}},a=!0;try{e[n].call(o.exports,o,o.exports,t),a=!1}finally{a&&delete r[n]}return o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(t,r){t.exports=e},function(e,t,r){"use strict";function n(e,t){function r(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]]);return r}function a(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function i(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,u)}c((n=n.apply(e,t||[])).next())})}function s(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(i=a[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,a=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(i=c.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(e){r=[6,e],a=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,a,i,u,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u}function l(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function p(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function h(e){return this instanceof h?(this.v=e,this):new h(e)}function y(e,t,r){function n(e){l[e]&&(s[e]=function(t){return new Promise(function(r,n){f.push([e,t,r,n])>1||o(e,t)})})}function o(e,t){try{a(l[e](t))}catch(e){c(f[0][3],e)}}function a(e){e.value instanceof h?Promise.resolve(e.value.v).then(i,u):c(f[0][2],e)}function i(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),f.shift(),f.length&&o(f[0][0],f[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,l=r.apply(e,t||[]),f=[];return s={},n("next"),n("throw"),n("return"),s[Symbol.asyncIterator]=function(){return this},s}function m(e){function t(t,o){e[t]&&(r[t]=function(r){return(n=!n)?{value:h(e[t](r)),done:"return"===t}:o?o(r):r})}var r,n;return r={},t("next"),t("throw",function(e){throw e}),t("return"),r[Symbol.iterator]=function(){return this},r}function v(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof f?f(e):e[Symbol.iterator]()}function b(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.__extends=n,r.d(t,"__assign",function(){return w}),t.__rest=o,t.__decorate=a,t.__param=i,t.__metadata=u,t.__awaiter=c,t.__generator=s,t.__exportStar=l,t.__values=f,t.__read=p,t.__spread=d,t.__await=h,t.__asyncGenerator=y,t.__asyncDelegator=m,t.__asyncValues=v,t.__makeTemplateObject=b,t.__importStar=_,t.__importDefault=g;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},w=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}},function(e,r){e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.themeFactory=t.hocFactory=t.reducerFactory=void 0;var n=r(5),o=r(11),a=r(6),i=t.reducerFactory=new n.BaseFactory,u=t.hocFactory=new n.BaseFactory;t.themeFactory=new n.BaseFactory;u.add("utils",o.utils.bind(o.utils,u)),u.add("merge",o.merge.bind(o.merge,u)),u.add("field",o.field.bind(o.field,u)),u.add("theme",o.theme.bind(o.theme,u)),u.add("array",o.array.bind(o.array,u)),u.add("validate",o.validate.bind(o.validate,u)),u.add("make",o.make.bind(o.make,u)),u.add("temp",o.temp.bind(o.temp,u)),u.add("data",o.data.bind(o.data,u)),i.add("schemaForm",a.schemaFormReducer)},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.schemaFormReducer=void 0;var n=r(4),o=r(18);t.schemaFormReducer=new o.SchemaFormReducer((0,n.fromJS)({}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaForm=void 0;var n=r(27);t.SchemaForm=n.SchemaForm},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.TreeMap=function(){function e(t,r,o){n(this,e),this.key=t,this.value=r,this.parent=o,this.children=[]}return o(e,[{key:"addChild",value:function(t,r){var n=this.getCurrentKeys(),o=this,a=null;if(t=t.splice(n.length),!t.length)return this;for(;t.length;){var i=t.shift(),u=i.constructor===Number;a=o.contains(i),a||(u?(a=new e("-",null,o),o.children[i]=a):(a=new e(i.toString(),null,o),o.children.push(a))),o=a}return a&&(a.value=r),a}},{key:"getKey",value:function(){return this.key&&"-"!==this.key?this.key:this.getIndexInParent().toString()}},{key:"getCurrentKeys",value:function(){var e=[];return this.parent&&(e=e.concat(this.parent.getCurrentKeys())),e.concat([this.key])}},{key:"getIndexInParent",value:function(){if(this.parent)for(var e=this.parent.children,t=0,r=e.length;t<r;t++){var n=e[t];if(n&&n===this)return t}return-1}},{key:"contains",value:function(e){if(e.constructor===Number)return this.children.length>e?this.children[e]:null;if(this.getKey()===e)return this;if(!this.children||0===this.children.length)return null;for(var t=0;t<this.children.length;t++){var r=this.children[t];if(r&&r.contains(e))return r}return null}},{key:"containPath",value:function(e){var t=this;return e.forEach(function(e){return t?(t=t.contains(e),t?void 0:null):null}),t}},{key:"removeFromParent",value:function(){var e=this.getIndexInParent();this.parent&&this.parent.children.splice(e,1)}},{key:"switchOneToOneFromParent",value:function(e){var t=this.getIndexInParent();if(this.parent&&this.parent.children&&!(t<0)&&!(this.parent.children.length<(t>e?t:e))){var r=[this.parent.children[e],this.parent.children[t]];this.parent.children[t]=r[0],this.parent.children[e]=r[1]}}},{key:"insertToFromParent",value:function(e){var t=this.getIndexInParent();!this.parent||!this.parent.children||t<0||(this.parent.children.length<=e&&this.parent.addChild(this.parent.getCurrentKeys().concat([e])),this.removeFromParent(),this.parent.children=this.parent.children.concat([]).splice(0,e-0).concat(this).concat(this.parent.children.splice(e-0)))}},{key:"forEach",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this.value=e(this)),this.children)for(var t=0,r=this.children.length;t<r;t++)this.children[t]&&(this.children[t].value=e(this.children[t]),this.children[t].forEach(e))}}]),e}()},function(e,t){e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),o=r(3),a=r(26),i=r(34),u=r(35),c=r(8),s=r(39),l=function(e){return e&&e.__esModule?e:{default:e}}(s),f=(a.props,i.models,{tempFactory:new n.BaseFactory,fieldFactory:new n.BaseFactory,widgetFactory:new n.BaseFactory});f.fieldFactory.add("default",u.NormalField),f.fieldFactory.add("object",u.ObjectField),f.fieldFactory.add("array",u.ArrayField),o.themeFactory.add("default",f),t.default={themeFactory:o.themeFactory,defaultTheme:f,schemaFormDec:l.default,TreeMap:c.TreeMap,reducerFactory:o.reducerFactory,SchemaForm:a.SchemaForm,hocFactory:o.hocFactory}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(12);Object.defineProperty(t,"merge",{enumerable:!0,get:function(){return n(o).default}});var a=r(13);Object.defineProperty(t,"utils",{enumerable:!0,get:function(){return n(a).default}});var i=r(15);Object.defineProperty(t,"theme",{enumerable:!0,get:function(){return n(i).default}});var u=r(16);Object.defineProperty(t,"field",{enumerable:!0,get:function(){return n(u).default}});var c=r(17);Object.defineProperty(t,"array",{enumerable:!0,get:function(){return n(c).default}});var s=r(21);Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return n(s).default}});var l=r(22);Object.defineProperty(t,"make",{enumerable:!0,get:function(){return n(l).default}});var f=r(23);Object.defineProperty(t,"temp",{enumerable:!0,get:function(){return n(f).default}});var p=r(24);Object.defineProperty(t,"data",{enumerable:!0,get:function(){return n(p).default}})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),s=r(0),l=function(e){return e&&e.__esModule?e:{default:e}}(s),f=r(5);t.default=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return function(t){function r(e){n(this,r);var t=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e)),a=e.uiSchema?Object.assign({},e.uiSchema):void 0;a&&(a.keys=a.originKeys);var i=new f.MergeLib(e.ajv,e.schemaId,a,e.uiSchemas);return t._mergeUiSchemaList=i.mergeUiSchemaList.map(function(e){return t.mergeKeys(e)}),t}return a(r,t),i(r,[{key:"mergeKeys",value:function(e){var t=this.props.arrayLevel,r=void 0===t?[]:t,n=r.concat([]);return e=Object.assign({},e),e.originKeys=[].concat(e.keys),e.keys=e.keys.reverse().map(function(e){return"-"===e?n.pop():e}),e.keys.reverse(),e}},{key:"render",value:function(){var t=this.props,r=(t.uiSchemas,t.uiSchema,c.__rest(t,["uiSchemas","uiSchema"]));return l.default.createElement(e,Object.assign({mergeSchemaList:this._mergeUiSchemaList},r))}}]),r}(s.PureComponent)}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(0),l=n(s),f=r(4),p=n(f),d=r(14),h=n(d);t.default=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return function(t){function r(){return a(this,r),i(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return u(r,t),c(r,[{key:"render",value:function(){return l.default.createElement(e,Object.assign({getTitle:this.getTitle,getPathKeys:this.getPathKeys,getOptions:this.getOptions},this.props))}},{key:"getOptions",value:function(e,t,r){var n=e.uiSchema,o=e.globalOptions,a=n.options,i=[];return o&&o.hasIn([t,"default"])&&i.push(o.getIn([t,"default"])),o&&o.hasIn([t,r])&&i.push(o.getIn([t,r])),a&&a.hasIn([t,r])&&i.push(a.getIn([t,r])),i.reverse().reduce(function(e,t){return t?t.merge(e):e},p.default.fromJS({})).toJS()}},{key:"getTitle",value:function(e){var t=e.uiSchema,r=t.title,n=t.keys;if(void 0!==r)return r;if(n&&n.length){var a=[].concat(o(n)),i=a.pop();return void 0!==i?i.toString():""}return e.arrayIndex?e.arrayIndex.toString():""}},{key:"getPathKeys",value:function(e,t){var r=[""].concat(e.concat([""])),n=(0,h.default)(t,r.join("/")).split("/");return n.shift(),n.length&&!n[n.length-1]&&n.pop(),n}}]),r}(s.PureComponent)}}},function(e,t){e.exports=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(u),s=r(3);t.default=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return a(r,t),i(r,[{key:"render",value:function(){var t=this.props.uiSchema,r=t.theme,n=(t.field,void 0);if(!s.themeFactory.has(r||"default"))throw new Error("没有找到"+(r||"default")+"的样式！");return n=s.themeFactory.get(r||"default"),c.default.createElement(e,Object.assign({currentTheme:n},this.props))}}]),r}(u.PureComponent)}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(u);t.default=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return a(r,t),i(r,[{key:"render",value:function(){var t=this.props,r=t.currentTheme,n=(t.getOptions,t.uiSchema),o=n.field,a=n.widget,i=n.type,u=void 0,s=void 0,l=o||i;if(r.fieldFactory.has(l))u=r.fieldFactory.get(l);else{if(!r.fieldFactory.has("default"))return console.error("找不到field："+(o||i)),null;u=r.fieldFactory.get("default")}return r.widgetFactory.has(a||i)?s=r.widgetFactory.get(a||i):r.widgetFactory.has("default")?s=r.widgetFactory.get("default"):console.warn("找不到widget："+(a||i),n),c.default.createElement(e,Object.assign({},this.props,{FieldComponent:u,WidgetComponent:s}))}}]),r}(u.PureComponent)}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),s=r(0),l=function(e){return e&&e.__esModule?e:{default:e}}(s),f=r(2),p=r(6);t.default=function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],(0,f.compose)((0,f.withHandlers)({addItem:function(e){return function(t,r){return c.__awaiter(void 0,void 0,void 0,regeneratorRuntime.mark(function n(){var o,a,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={},a={},i=t.uiSchema?t.uiSchema.items:{},n.prev=1,n.next=4,t.ajv.validate({type:"object",properties:{defaultData:i}},a);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),console.log(n.t0);case 9:if(n.prev=9,!e.uiSchema||!e.uiSchema.items){n.next=20;break}n.t1=e.uiSchema.items.type,n.next="object"===n.t1?14:"array"===n.t1?17:19;break;case 14:return a.defaultData||(a.defaultData=r||{}),Object.assign(a.defaultData,r),n.abrupt("break",20);case 17:return a.defaultData||(a.defaultData=r||[]),n.abrupt("break",20);case 19:return n.abrupt("break",20);case 20:return p.schemaFormReducer.actions.addItem({parentKeys:t.parentKeys,keys:t.uiSchema.keys,data:a.defaultData}),n.finish(9);case 22:case"end":return n.stop()}},n,this,[[1,6,9,22]])}))}},removeItem:function(e){return function(e,t,r){p.schemaFormReducer.actions.removeItem({parentKeys:e,keys:t,index:r})}},switchItem:function(e){return function(e,t,r,n){p.schemaFormReducer.actions.switchItem({parentKeys:e,keys:t,curIndex:r,toIndex:n})}},moveItem:function(e){return function(e,t,r,n){p.schemaFormReducer.actions.moveToItem({parentKeys:e,keys:t,curIndex:r,toIndex:n})}},initArrayComponent:function(e){return function(e,t){var r=e.ArrayComponent,n=e.ArrayItemComponent,o=c.__rest(e,["ArrayComponent","ArrayItemComponent"]);return"array"===e.uiSchema.type?r?l.default.createElement(r,Object.assign({},o)):null:n?l.default.createElement(n,Object.assign({},o)):null}}}))),r=function(e){var r=function(t){function r(e,t){n(this,r);var a=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return a.initArrayComponents(),a}return a(r,t),i(r,[{key:"initArrayComponents",value:function(){var e=this.props.getOptions,t=e(this.props,"hoc","array");t.ArrayComponent&&(this.ArrayComponent=t.ArrayComponent),t.ArrayItemComponent&&(this.ArrayItemComponent=t.ArrayItemComponent)}},{key:"render",value:function(){var t={};return this.ArrayComponent&&(t.ArrayComponent=this.ArrayComponent),this.ArrayItemComponent&&(t.ArrayItemComponent=this.ArrayItemComponent),l.default.createElement(e,Object.assign({},this.props,t))}}]),r}(s.PureComponent);return r=c.__decorate([t,c.__metadata("design:paramtypes",[Object,Object])],r)},u=function(e){var r=function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return a(r,t),i(r,[{key:"render",value:function(){return l.default.createElement(e,Object.assign({},this.props))}}]),r}(l.default.PureComponent);return r=c.__decorate([t],r)};return(0,f.branch)(function(e){var t=e.uiSchema;return"array"===(void 0===t?{type:""}:t).type},r,u)}},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaFormReducer=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(19),c=r(4),s=r(20),l=r(8);s.a,t.SchemaFormReducer=function(){function e(t){a(this,e),this.initialState=t,this.createForm=(0,u.createAction)("创建一个表单数据"),this.updateItemData=(0,u.createAction)("更新一个表单数据"),this.updateItemMeta=(0,u.createAction)("更新一个表单元数据"),this.addItem=(0,u.createAction)("添加一个数据"),this.removeItem=(0,u.createAction)("删除一个数据"),this.switchItem=(0,u.createAction)("元素22交换位置"),this.moveToItem=(0,u.createAction)("元素移位"),this.validateAll=(0,u.createAction)("验证全部字段")}return i(e,[{key:"resolveKeys",value:function(e,t){if(e.hasIn(t))return e;for(var r=0,n=t.length;r<n;r++){var a=[].concat(o(t)).splice(0,r+1);if(e.hasIn(a)){if(r<n){var i=e.getIn(a);c.Map.isMap(i)||c.List.isList(i)||(e=t[r+1].constructor===Number?e.setIn(a,(0,c.List)()):e.setIn(a,(0,c.Map)()))}}else a.pop(),e.hasIn(a)||(e=t[r].constructor===Number?e.setIn(a,(0,c.List)()):e.setIn(a,(0,c.Map)()))}return e}},{key:"createFormHandle",value:function(e,t){var r=t.key,n=t.data;e.has(r)&&(e=e.remove(r));var o=new l.TreeMap(r,(0,c.fromJS)({})),a=(0,c.Map)({meta:o,data:(0,c.fromJS)(n)});return e.set(r,a)}},{key:"updateItemDataHandle",value:function(e,t){var r=t.parentKeys,n=t.keys,a=t.data,i=t.meta,u=r.concat(["data"].concat(o(n)));return e=this.resolveKeys(e,u),e=e.setIn(u,(0,c.fromJS)(a)),i&&(e=this.updateItemMetaHandle(e,{parentKeys:r,keys:n,meta:i})),e}},{key:"addItemDataHandle",value:function(e,t){var r=t.parentKeys,n=t.keys,a=t.data,i=r.concat(["data"].concat(o(n))),u=r.concat(["meta"]),s=e.getIn(u),l=s.containPath(r.concat(n)),f=void 0;return e=this.resolveKeys(e,i),f=e.getIn(i)||(0,c.List)(),f=f.push((0,c.fromJS)(a)),l&&l.value&&(l.value=l.value.merge({collapsing:!1})),e.setIn(i,f)}},{key:"removeItemDataHandle",value:function(e,t){var r=t.parentKeys,n=t.keys,a=t.index,i=r.concat(["data"].concat(o(n))),u=r.concat(["meta"]),s=e.getIn(u),l=s.addChild(r.concat(n).concat([a])),f=void 0;return e=this.resolveKeys(e,i),(f=e.getIn(i))&&c.List.isList(f)?(l&&l.removeFromParent(),e.setIn(i,f.remove(a))):e}},{key:"switchItemHandle",value:function(e,t){var r=t.parentKeys,n=t.keys,a=t.curIndex,i=t.toIndex,u=r.concat(["data"].concat(o(n))),c=r.concat(["meta"]),s=e.getIn(c),l=void 0,f=void 0;if(e=this.resolveKeys(e,u),!(l=e.getIn(u))||l.size<=i||i<0)return e;var p=l.get(a);return l=l.set(a,l.get(i)),l=l.set(i,p),f=s.containPath(r.concat(n).concat([a])),f?f.switchOneToOneFromParent(i):(f=s.containPath(r.concat(n).concat([i])))&&f.switchOneToOneFromParent(a),e.setIn(u,l)}},{key:"moveItemHandle",value:function(e,t){var r=t.parentKeys,n=t.keys,a=t.curIndex,i=t.toIndex,u=r.concat(["data"].concat(o(n))),c=r.concat(["meta"]),s=e.getIn(c),l=s.containPath(r.concat(n).concat([a])),f=void 0;if(e=this.resolveKeys(e,u),!(f=e.getIn(u))||f.size<=i||i<0)return e;var p=f.get(a);return f=f.remove(a),f=f.insert(i-0,p),l&&l.insertToFromParent(i),e.setIn(u,f)}},{key:"updateItemMetaHandle",value:function(e,t){var r=t.parentKeys,n=t.keys,o=t.data,a=r.concat(["meta"]),i=e.getIn(a),u=i.addChild(r.concat(n)),s=u?u.value:null;u&&(u.value=s?u.value.merge(o):(0,c.fromJS)(o));var f=new l.TreeMap(i.getKey(),i.value);return f.children=i.children,e.setIn(a,f)}},{key:"actions",get:function(){return{createForm:this.createForm,updateItemData:this.updateItemData,updateItemMeta:this.updateItemMeta,addItem:this.addItem,removeItem:this.removeItem,moveToItem:this.moveToItem,switchItem:this.switchItem}}},{key:"reducer",get:function(){var e;return(0,u.createReducer)((e={},n(e,this.createForm,this.createFormHandle.bind(this)),n(e,this.updateItemData,this.updateItemDataHandle.bind(this)),n(e,this.updateItemMeta,this.updateItemMetaHandle.bind(this)),n(e,this.addItem,this.addItemDataHandle.bind(this)),n(e,this.removeItem,this.removeItemDataHandle.bind(this)),n(e,this.switchItem,this.switchItemHandle.bind(this)),n(e,this.moveToItem,this.moveItemHandle.bind(this)),e),this.initialState)}}]),e}()},function(e,t){e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.a=1},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),s=r(0),l=function(e){return e&&e.__esModule?e:{default:e}}(s),f=r(2),p=r(6);t.default=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){var t=function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return a(r,t),i(r,[{key:"render",value:function(){return l.default.createElement(e,Object.assign({},this.props))}}]),r}(s.PureComponent);return t=c.__decorate([(0,f.compose)((0,f.withHandlers)({validate:function(e){return function(e,t){return c.__awaiter(void 0,void 0,void 0,regeneratorRuntime.mark(function r(){var n,o,a,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n={dirty:!0,isValid:!1,isLoading:!1},o=setTimeout(function(){p.schemaFormReducer.actions.updateItemMeta({parentKeys:e.parentKeys,keys:e.uiSchema.keys,data:{isLoading:!0,isValid:!1,errorText:!1}})},200),r.prev=2,r.next=5,e.ajv.validate(e.uiSchema,t);case 5:if(a=r.sent,n.isValid=a,a){r.next=11;break}throw i=new Error,i.errors=e.ajv.errors,i;case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(2),n.errorText=r.t0.errors?e.ajv.errorsText(r.t0.errors,{dataVar:e.getTitle(e).toString()}):r.t0.message;case 16:return r.prev=16,clearTimeout(o),r.finish(16);case 19:return r.abrupt("return",n);case 20:case"end":return r.stop()}},r,this,[[2,13,16,19]])}))}}}),(0,f.withHandlers)({updateItemData:function(e){return function(e,t,r){p.schemaFormReducer.actions.updateItemData({parentKeys:e.parentKeys,keys:e.uiSchema.keys,data:t,meta:r})}},updateItemMeta:function(e){return function(t,r,n){return c.__awaiter(void 0,void 0,void 0,regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.t0=p.schemaFormReducer.actions,o.t1=t.parentKeys,o.t2=t.uiSchema.keys,o.t3=n,o.t3){o.next=8;break}return o.next=7,e.validate(t,r);case 7:o.t3=o.sent;case 8:o.t4=o.t3,o.t5={parentKeys:o.t1,keys:o.t2,data:o.t4},o.t0.updateItemMeta.call(o.t0,o.t5);case 11:case"end":return o.stop()}},o,this)}))}}}))],t)}}},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),s=function(e){return e&&e.__esModule?e:{default:e}}(c),l=r(2);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){return function(c){function f(){o(this,f);var e=a(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments));return e.fieldKey="hocs",e}return i(f,c),u(f,[{key:"render",value:function(){var o=this.props,a=o.uiSchema,i=o.getOptions,u=a.type,c=(i(this.props,"field",u),t.hocs||(a?a.hocs:null)||["theme","field","validate","array","temp"]);c.unshift("utils");var f=l.compose.apply(void 0,n([].concat(n(c)).map(function(t){return"string"!=typeof t?t:e.get(t)()})))(r);return s.default.createElement(f,Object.assign({},this.props))}}]),f}(c.PureComponent)}}},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),s=function(e){return e&&e.__esModule?e:{default:e}}(c),l=r(2);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tempField:"temps",templates:[]};return function(e){return function(r){function c(){return o(this,c),a(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return i(c,r),u(c,[{key:"render",value:function(){var t=this,r=this.props,o=r.uiSchema,a=r.getOptions;o.options,o.keys;return this.getTemplates().reduce(function(e,r){var o=r.key,i=r.Temp,u=a(t.props,"temp",o),c=l.compose.apply(void 0,n(u.tempHocs||[]))(i);return s.default.createElement(c,{tempKey:o,ajv:t.props.ajv,uiSchema:t.props.uiSchema,schemaId:t.props.schemaId,arrayLevel:t.props.arrayLevel,arrayIndex:t.props.arrayIndex,globalOptions:t.props.globalOptions,ArrayComponent:t.props.ArrayComponent,ArrayItemComponent:t.props.ArrayItemComponent,initArrayComponent:t.props.initArrayComponent,parentKeys:t.props.parentKeys,getTitle:t.props.getTitle,getOptions:t.props.getOptions,getPathKeys:t.props.getPathKeys,children:e})},s.default.createElement(e,Object.assign({},this.props)))}},{key:"getTemplates",value:function(){var e=this.props,r=e.uiSchema,o=e.currentTheme,a=e.getOptions,i=(r.keys,r.type),u=a(this.props,"field",i),c=[],s=void 0;s=t.templates&&t.templates.length>0?t.templates:u[t.tempField]||"default";return function e(t){switch(t.constructor){case String:o.tempFactory.has(t)?c.push({key:t,Temp:o.tempFactory.get(t)}):console.error("不存在"+t+"的temp！");break;case Object:c.push({key:t.name,Temp:t});break;case Array:[].concat(n(s)).reverse().forEach(function(t,r){e(t)})}}(s),c}}]),c}(c.PureComponent)}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),l=r(0),f=function(e){return e&&e.__esModule?e:{default:e}}(l),p=r(2),d=r(9),h=r(25),y=r(4),m=(0,h.createSelectorCreator)(h.defaultMemoize,y.is);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:!0,rootReducerKey:["schemaForm"]},r=function(e,r){return m([function(n){var o=t.rootReducerKey.concat([].concat(i(e),["data"],i(r)));if(t.data&&n.hasIn(o)){var a=n.getIn(o);if(void 0!==a)return t.dataLength?a.size:a}},function(n){var o=t.rootReducerKey.concat([].concat(i(e),["meta"]));if(t.meta&&n.hasIn(o)){var a=n.getIn(o),u=a.containPath([].concat(i(e),i(r)));if(u&&u.value)return u.value}}],function(e,t){var r={};return e&&(r.formItemData=e),t&&(r.formItemMeta=t),r})};return function(e){var t=function(t){function i(){return n(this,i),o(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return a(i,t),u(i,[{key:"render",value:function(){var t=this.props.uiSchema||{},n=t.keys,o=void 0===n?[]:n,a=(0,d.connect)(r(this.props.parentKeys,o)),i=a(e);return f.default.createElement(i,Object.assign({},this.props))}}]),i}(l.PureComponent);return t=s.__decorate([(0,p.shouldUpdate)(function(){return!1})],t)}}},function(e,t){e.exports=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7);Object.defineProperty(t,"SchemaForm",{enumerable:!0,get:function(){return n.SchemaForm}});var o=r(33);Object.defineProperty(t,"props",{enumerable:!0,get:function(){return o.props}})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaForm=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),s=r(0),l=function(e){return e&&e.__esModule?e:{default:e}}(s),f=r(28),p=r(29),d=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.schemaId,r=e.mergeSchemaList,n=e.arrayLevel,o=e.RootComponent,a=e.children,i=c.__rest(e,["schemaId","mergeSchemaList","arrayLevel","RootComponent","children"]),u=r?r.map(function(e,r){var o=n?n.concat([]):[];return l.default.createElement(p.SchemaFormItem,Object.assign({key:r},i,{schemaId:t,uiSchema:e,arrayLevel:o}))}):[];return o?l.default.createElement(o,null,u,a):l.default.createElement("div",null,u,a)}}]),t}(s.PureComponent);t.SchemaForm=d=c.__decorate([f.hoc],d),t.SchemaForm=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hoc=void 0;var n=r(2),o=r(3);t.hoc=(0,n.compose)((0,n.shouldUpdate)(function(){return!1}),o.hocFactory.get("utils")(),o.hocFactory.get("merge")())},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaFormItem=void 0;var n=r(30);t.SchemaFormItem=n.SchemaFormItem},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaFormItem=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),l=r(0),f=function(e){return e&&e.__esModule?e:{default:e}}(l),p=r(31),d=r(32),h=function(e){function t(e,r){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.FieldComponent,r=e.uiSchema,o=s.__rest(e,["FieldComponent","uiSchema"]),a=o.getOptions(this.props,"field",r.field||r.type),i=t;return t?(a.fieldHocs&&a.fieldHocs.length&&(i=p.compose.apply(void 0,n(a.fieldHocs||[]))(t)),f.default.createElement(i,Object.assign({key:r.keys.join("formItem"),uiSchema:r},o))):(console.log(r,"没有找到匹配的field"),null)}}]),t}(l.PureComponent);t.SchemaFormItem=h=s.__decorate([d.hoc,s.__metadata("design:paramtypes",[Object,Object])],h),t.SchemaFormItem=h},function(e,t){e.exports=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hoc=void 0;var n=r(2),o=r(3);t.hoc=(0,n.compose)(o.hocFactory.get("utils")(),o.hocFactory.get("make")())},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.props=1},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.models=1},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(36);Object.defineProperty(t,"NormalField",{enumerable:!0,get:function(){return n.NormalField}});var o=r(37);Object.defineProperty(t,"ObjectField",{enumerable:!0,get:function(){return o.ObjectField}});var a=r(38);Object.defineProperty(t,"ArrayField",{enumerable:!0,get:function(){return a.ArrayField}})},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NormalField=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),l=r(0),f=function(e){return e&&e.__esModule?e:{default:e}}(l),p=r(2);t.NormalField=function(e){function t(e,r){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.WidgetComponent,r=(e.FieldComponent,e.formItemMeta,e.formItemData,s.__rest(e,["WidgetComponent","FieldComponent","formItemMeta","formItemData"])),o=r.getOptions(this.props,"field","normal"),a=r.uiSchema.keys,i=t;return t&&a?(o.widgetHocs&&o.widgetHocs.length&&(i=p.compose.apply(void 0,n(o.widgetHocs))(t)),f.default.createElement(i,Object.assign({key:a.join(".")},r))):null}}]),t}(l.PureComponent)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectField=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(u),s=r(7);t.ObjectField=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"render",value:function(){var e=this.props.uiSchema,t=this.props,r=t.arrayIndex,n=t.arrayLevel,o=t.parentKeys,a=t.globalOptions,i=t.ajv;t.schemaId;return null!==e.children&&e.schemaPath?c.default.createElement(s.SchemaForm,{arrayIndex:r,arrayLevel:n,schemaId:e.schemaPath,uiSchemas:e.children||["*"],uiSchema:e,parentKeys:o,globalOptions:a,ajv:i}):null}}]),t}(u.PureComponent)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayField=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(u),s=r(7),l={width:"100%",height:"100%"};t.ArrayField=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"renderItem",value:function(e){var t=this.props,r=t.parentKeys,n=t.globalOptions,o=t.arrayLevel,a=void 0===o?[]:o,i=t.ajv,u=t.ArrayItemComponent,l=this.props.uiSchema;return null!==l.children&&l.schemaPath?c.default.createElement(s.SchemaForm,{key:e,arrayIndex:e,uiSchema:l,ArrayItemComponent:u,arrayLevel:a.concat([e]),schemaId:l.schemaPath,uiSchemas:l.children||["-"],parentKeys:r,globalOptions:n,ajv:i}):null}},{key:"render",value:function(){for(var e=this.props,t=(e.uiSchema,e.formItemData),r=[],n=0;n<+t;n++)r.push(this.renderItem(n));return c.default.createElement("div",{style:l},r||null)}}]),t}(u.PureComponent)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),l=r(0),f=n(l),p=r(9),d=r(4),h=n(d),y=r(40),m=r(5),v=r(3),b=v.reducerFactory.get("schemaForm").actions;t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rootReducerKey:[],parentKeys:[]};return function(t){var r=function(r){function n(e){o(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._validateAll=t.validateAll.bind(t),t}return i(n,r),u(n,[{key:"validateAll",value:function(){return s.__awaiter(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,o,a,i,u=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.props.root,n=this.props.ajv.getSchema(this.props.schemaId),o=h.default.fromJS({dirty:!0,isValid:!0,isLoading:!0}),a=h.default.fromJS({isLoading:!1,dirty:!0}),i=this.normalizeDataPath,r){t.next=3;break}return t.abrupt("return");case 3:if(n){t.next=5;break}throw new Error("没有找到对应的"+this.props.schemaId+";");case 5:return t.prev=5,r.forEach(function(e){return e.value?e.value.merge(o):o},!0),b.updateItemMeta({parentKeys:e.parentKeys,keys:[],data:r.value}),t.next=10,n(this.props.data.toJS());case 10:r.value=r.value.merge({isValid:!0}),b.updateItemMeta({parentKeys:e.parentKeys,keys:[],data:r.value}),t.next=22;break;case 14:if(t.prev=14,t.t0=t.catch(5),t.t0 instanceof y.ValidationError){t.next=18;break}return t.abrupt("return",console.error(t.t0));case 18:if(r){t.next=20;break}return t.abrupt("return");case 20:t.t0.errors.forEach(function(e){var t=r.getCurrentKeys().concat(i(u.props.schemaId,e.dataPath)),n=r.addChild(t,h.default.fromJS({}));n&&(n.value=n.value.merge(a).merge({isValid:!1,errorText:e.message}))}),r.value=r.value.merge({isValid:!1,errors:t.t0.errors});case 22:return t.prev=22,r.forEach(function(e){return e.value?e.value.merge(a):e.value},!0),b.updateItemMeta({parentKeys:e.parentKeys,keys:[],data:r.value}),t.finish(22);case 26:case"end":return t.stop()}},t,this,[[5,14,22,26]])}))}},{key:"normalizeDataPath",value:function(e,t){var r=t.substring(1).split("/");return r=r.map(function(t,n){if(Number.isInteger(+t)){var o=r.slice(0,n);if(o.unshift(e),m.schemaKeysFactory.has(o.join("/"))){if("array"===m.schemaFieldFactory.get(m.schemaKeysFactory.get(o.join("/"))).type)return+t}}return t})}},{key:"render",value:function(){var r=this.props;r.errors,r.isValid,r.isValidating;return f.default.createElement(t,Object.assign({validateAll:this._validateAll,parentKeys:e.parentKeys},this.props))}}]),n}(l.PureComponent);return r=s.__decorate([(0,p.connect)(function(t){var r=e.rootReducerKey.concat(e.parentKeys).concat(["data"]),n=e.rootReducerKey.concat(e.parentKeys).concat(["meta"]),o=t.getIn(n);return{data:t.getIn(r),root:o,isValid:o.value.get("isValid"),errors:o.value.get("errors"),isValidating:o.value.get("isLoading")}}),s.__metadata("design:paramtypes",[Object])],r)}}},function(e,t){e.exports=s}]).default});
//# sourceMappingURL=index.map