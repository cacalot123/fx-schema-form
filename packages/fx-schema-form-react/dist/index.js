!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("recompose"),require("immutable"),require("fx-schema-form-core"),require("react-redux"),require("resolve-pathname"),require("redux-act"),require("reselect"),require("redux"),require("ajv")):"function"==typeof define&&define.amd?define("fx-schema-form-react",["react","recompose","immutable","fx-schema-form-core","react-redux","resolve-pathname","redux-act","reselect","redux","ajv"],t):"object"==typeof exports?exports["fx-schema-form-react"]=t(require("react"),require("recompose"),require("immutable"),require("fx-schema-form-core"),require("react-redux"),require("resolve-pathname"),require("redux-act"),require("reselect"),require("redux"),require("ajv")):e["fx-schema-form-react"]=t(e.React,e.recompose,e.Immutable,e["fx-schema-form-core"],e["react-redux"],e["resolve-pathname"],e["redux-act"],e.reselect,e.Redux,e.Ajv)}("undefined"!=typeof self?self:this,function(e,t,r,n,o,a,i,c,u,s){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}},a=!0;try{e[n].call(o.exports,o,o.exports,t),a=!1}finally{a&&delete r[n]}return o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(t,r){t.exports=e},function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]]);return r}function o(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function i(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function c(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})}t.d=n,t.b=o,t.c=a,t.a=i;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
Object.setPrototypeOf||Array,Object.assign},function(e,r){e.exports=t},function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return c}),r.d(t,"c",function(){return u});var n=r(5),o=(r.n(n),r(11)),a=r(6),i=new n.BaseFactory,c=new n.BaseFactory,u=new n.BaseFactory;c.add("utils",o.h.bind(o.h,c)),c.add("merge",o.e.bind(o.e,c)),c.add("field",o.c.bind(o.c,c)),c.add("theme",o.g.bind(o.g,c)),c.add("array",o.a.bind(o.a,c)),c.add("validate",o.i.bind(o.i,c)),c.add("make",o.d.bind(o.d,c)),c.add("temp",o.f.bind(o.f,c)),c.add("data",o.b.bind(o.b,c)),i.add("schemaForm",a.a)},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(4),o=(r.n(n),r(18)),a=new o.a(Object(n.fromJS)({}))},function(e,t,r){"use strict";var n=r(26);r.d(t,"a",function(){return n.a})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",function(){return a});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r,o){n(this,e),this.key=t,this.value=r,this.parent=o,this.children=[]}return o(e,[{key:"addChild",value:function(t,r){var n=this.getCurrentKeys(),o=this,a=null;if(t=t.splice(n.length),!t.length)return this;for(;t.length;){var i=t.shift(),c=i.constructor===Number;a=o.contains(i),a||(c?(a=new e("-",null,o),o.children[i]=a):(a=new e(i.toString(),null,o),o.children.push(a))),o=a}return a&&(a.value=r),a}},{key:"getKey",value:function(){return this.key&&"-"!==this.key?this.key:this.getIndexInParent().toString()}},{key:"getCurrentKeys",value:function(){var e=[];return this.parent&&(e=e.concat(this.parent.getCurrentKeys())),e.concat([this.key])}},{key:"getIndexInParent",value:function(){if(this.parent)for(var e=this.parent.children,t=0,r=e.length;t<r;t++){var n=e[t];if(n&&n===this)return t}return-1}},{key:"contains",value:function(e){if(e.constructor===Number)return this.children.length>e?this.children[e]:null;if(this.getKey()===e)return this;if(!this.children||0===this.children.length)return null;for(var t=0;t<this.children.length;t++){var r=this.children[t];if(r&&r.contains(e))return r}return null}},{key:"containPath",value:function(e){var t=this;return e.forEach(function(e){return t?(t=t.contains(e),t?void 0:null):null}),t}},{key:"removeFromParent",value:function(){var e=this.getIndexInParent();this.parent&&this.parent.children.splice(e,1)}},{key:"switchOneToOneFromParent",value:function(e){var t=this.getIndexInParent();if(this.parent&&this.parent.children&&!(t<0)&&!(this.parent.children.length<(t>e?t:e))){var r=[this.parent.children[e],this.parent.children[t]];this.parent.children[t]=r[0],this.parent.children[e]=r[1]}}},{key:"insertToFromParent",value:function(e){var t=this.getIndexInParent();!this.parent||!this.parent.children||t<0||(this.parent.children.length<=e&&this.parent.addChild(this.parent.getCurrentKeys().concat([e])),this.removeFromParent(),this.parent.children=this.parent.children.concat([]).splice(0,e-0).concat(this).concat(this.parent.children.splice(e-0)))}},{key:"forEach",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this.value=e(this)),this.children)for(var t=0,r=this.children.length;t<r;t++)this.children[t]&&(this.children[t].value=e(this.children[t]),this.children[t].forEach(e))}}]),e}()},function(e,t){e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),o=(r.n(n),r(3)),a=r(25),i=r(33),c=r(34),u=r(8),s=r(38),f=(a.b,i.a,{tempFactory:new n.BaseFactory,fieldFactory:new n.BaseFactory,widgetFactory:new n.BaseFactory});f.fieldFactory.add("default",c.b),f.fieldFactory.add("object",c.c),f.fieldFactory.add("array",c.a),o.c.add("default",f),t.default={themeFactory:o.c,defaultTheme:f,schemaFormDec:s.a,TreeMap:u.a,reducerFactory:o.b,SchemaForm:a.a,hocFactory:o.a}},function(e,t,r){"use strict";var n=r(12);r.d(t,"e",function(){return n.a});var o=r(13);r.d(t,"h",function(){return o.a});var a=r(15);r.d(t,"g",function(){return a.a});var i=r(16);r.d(t,"c",function(){return i.a});var c=r(17);r.d(t,"a",function(){return c.a});var u=r(20);r.d(t,"i",function(){return u.a});var s=r(21);r.d(t,"d",function(){return s.a});var f=r(22);r.d(t,"f",function(){return f.a});var l=r(23);r.d(t,"b",function(){return l.a})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(1),c=r(0),u=r.n(c),s=r(5),f=(r.n(s),function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}());t.a=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return function(t){function r(e){n(this,r);var t=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e)),a=e.uiSchema?Object.assign({},e.uiSchema):null;a&&(a.keys=a.originKeys);var i=new s.MergeLib(e.ajv,e.schemaId,a,e.uiSchemas);return t._mergeUiSchemaList=i.mergeUiSchemaList.map(function(e){return t.mergeKeys(e)}),t}return a(r,t),f(r,[{key:"mergeKeys",value:function(e){var t=this.props.arrayLevel,r=void 0===t?[]:t,n=r.concat([]);return e=Object.assign({},e),e.originKeys=[].concat(e.keys),e.keys=e.keys.reverse().map(function(e){return"-"===e?n.pop():e}),e.keys.reverse(),e}},{key:"render",value:function(){var t=this.props,r=(t.uiSchemas,t.uiSchema,i.d(t,["uiSchemas","uiSchema"]));return u.a.createElement(e,Object.assign({mergeSchemaList:this._mergeUiSchemaList},r))}}]),r}(c.PureComponent)}}},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=r(0),u=r.n(c),s=r(4),f=r.n(s),l=r(14),p=r.n(l),h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.a=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return function(t){function r(){return o(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,t),h(r,[{key:"render",value:function(){return u.a.createElement(e,Object.assign({getTitle:this.getTitle,getPathKeys:this.getPathKeys,getOptions:this.getOptions},this.props))}},{key:"getOptions",value:function(e,t,r){var n=e.uiSchema,o=e.globalOptions,a=n.options,i=[];return o&&o.hasIn([t,"default"])&&i.push(o.getIn([t,"default"])),o&&o.hasIn([t,r])&&i.push(o.getIn([t,r])),a&&a.hasIn([t,r])&&i.push(a.getIn([t,r])),i.reverse().reduce(function(e,t){return t?t.merge(e):e},f.a.fromJS({})).toJS()}},{key:"getTitle",value:function(e){var t=e.uiSchema,r=t.title,o=t.keys;if(void 0!==r)return r;if(o&&o.length){var a=[].concat(n(o)),i=a.pop();return i?i.toString():""}return e.arrayIndex?e.arrayIndex.toString():""}},{key:"getPathKeys",value:function(e,t){var r=[""].concat(e.concat([""])),n=p()(t,r.join("/")).split("/");return n.shift(),n.length&&!n[n.length-1]&&n.pop(),n}}]),r}(c.PureComponent)}}},function(e,t){e.exports=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(0),c=r.n(i),u=r(3),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.a=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return a(r,t),s(r,[{key:"render",value:function(){var t=this.props.uiSchema,r=t.theme,n=(t.field,void 0);if(!u.c.has(r||"default"))throw new Error("没有找到"+(r||"default")+"的样式！");return n=u.c.get(r||"default"),c.a.createElement(e,Object.assign({currentTheme:n},this.props))}}]),r}(i.PureComponent)}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(0),c=r.n(i),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.a=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return a(r,t),u(r,[{key:"render",value:function(){var t=this.props,r=t.currentTheme,n=(t.getOptions,t.uiSchema),o=n.field,a=n.widget,i=n.type,u=void 0,s=void 0,f=o||i;if(r.fieldFactory.has(f))u=r.fieldFactory.get(f);else{if(!r.fieldFactory.has("default"))return console.error("找不到field："+(o||i)),null;u=r.fieldFactory.get("default")}return r.widgetFactory.has(a||i)?s=r.widgetFactory.get(a||i):r.widgetFactory.has("default")?s=r.widgetFactory.get("default"):console.warn("找不到widget："+(a||i),n),c.a.createElement(e,Object.assign({},this.props,{FieldComponent:u,WidgetComponent:s}))}}]),r}(i.PureComponent)}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(1),c=r(0),u=r.n(c),s=r(2),f=(r.n(s),r(6)),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=this;t.a=function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],Object(s.compose)(Object(s.withHandlers)({addItem:function(e){return function(e,t){return i.a(p,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={},n={},o=e.uiSchema?e.uiSchema.items:{},t.prev=1,t.next=4,e.ajv.validate({type:"object",properties:{defaultData:o}},n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:return t.prev=9,f.a.actions.addItem({parentKeys:e.parentKeys,keys:e.uiSchema.keys,data:n.defaultData}),t.finish(9);case 12:case"end":return t.stop()}},t,this,[[1,6,9,12]])}))}},removeItem:function(e){return function(e,t,r){f.a.actions.removeItem({parentKeys:e,keys:t,index:r})}},switchItem:function(e){return function(e,t,r,n){f.a.actions.switchItem({parentKeys:e,keys:t,curIndex:r,toIndex:n})}},moveItem:function(e){return function(e,t,r,n){f.a.actions.moveToItem({parentKeys:e,keys:t,curIndex:r,toIndex:n})}},initArrayComponent:function(e){return function(e,t){var r=e.ArrayComponent,n=e.ArrayItemComponent,o=i.d(e,["ArrayComponent","ArrayItemComponent"]);return"array"===e.uiSchema.type?r?u.a.createElement(r,Object.assign({},o)):null:n?u.a.createElement(n,Object.assign({},o)):null}}}))),r=function(e){var r=function(t){function r(e,t){n(this,r);var a=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return a.initArrayComponents(),a}return a(r,t),l(r,[{key:"initArrayComponents",value:function(){var e=this.props.getOptions,t=e(this.props,"hoc","array");t.ArrayComponent&&(this.ArrayComponent=t.ArrayComponent),t.ArrayItemComponent&&(this.ArrayItemComponent=t.ArrayItemComponent)}},{key:"render",value:function(){var t={};return this.ArrayComponent&&(t.ArrayComponent=this.ArrayComponent),this.ArrayItemComponent&&(t.ArrayItemComponent=this.ArrayItemComponent),u.a.createElement(e,Object.assign({},this.props,t))}}]),r}(c.PureComponent);return r=i.b([t,i.c("design:paramtypes",[Object,Object])],r)},h=function(e){var r=function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return a(r,t),l(r,[{key:"render",value:function(){return u.a.createElement(e,Object.assign({},this.props))}}]),r}(u.a.PureComponent);return r=i.b([t],r)};return Object(s.branch)(function(e){var t=e.uiSchema;return"array"===(void 0===t?{type:""}:t).type},r,h)}},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",function(){return f});var i=r(19),c=(r.n(i),r(4)),u=(r.n(c),r(8)),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=function(){function e(t){a(this,e),this.initialState=t,this.createForm=Object(i.createAction)("创建一个表单数据"),this.updateItemData=Object(i.createAction)("更新一个表单数据"),this.updateItemMeta=Object(i.createAction)("更新一个表单元数据"),this.addItem=Object(i.createAction)("添加一个数据"),this.removeItem=Object(i.createAction)("删除一个数据"),this.switchItem=Object(i.createAction)("元素22交换位置"),this.moveToItem=Object(i.createAction)("元素移位"),this.validateAll=Object(i.createAction)("验证全部字段")}return s(e,[{key:"resolveKeys",value:function(e,t){if(e.hasIn(t))return e;for(var r=0,n=t.length;r<n;r++){var a=[].concat(o(t)).splice(0,r+1);if(e.hasIn(a)){if(r<n){var i=e.getIn(a);c.Map.isMap(i)||c.List.isList(i)||(e=t[r+1].constructor===Number?e.setIn(a,Object(c.List)()):e.setIn(a,Object(c.Map)()))}}else a.pop(),e.hasIn(a)||(e=t[r].constructor===Number?e.setIn(a,Object(c.List)()):e.setIn(a,Object(c.Map)()))}return e}},{key:"createFormHandle",value:function(e,t){var r=t.key,n=t.data;e.has(r)&&(e=e.remove(r));var o=new u.a(r,Object(c.fromJS)({})),a=Object(c.Map)({meta:o,data:Object(c.fromJS)(n)});return e.set(r,a)}},{key:"updateItemDataHandle",value:function(e,t){var r=t.parentKeys,n=t.keys,a=t.data,i=t.meta,u=r.concat(["data"].concat(o(n)));return e=this.resolveKeys(e,u),e=e.setIn(u,Object(c.fromJS)(a)),i&&(e=this.updateItemMetaHandle(e,{parentKeys:r,keys:n,meta:i})),e}},{key:"addItemDataHandle",value:function(e,t){var r=t.parentKeys,n=t.keys,a=t.data,i=r.concat(["data"].concat(o(n))),u=r.concat(["meta"]),s=e.getIn(u),f=s.containPath(r.concat(n)),l=void 0;return e=this.resolveKeys(e,i),l=e.getIn(i)||Object(c.List)(),l=l.push(Object(c.fromJS)(a)),f&&f.value&&(f.value=f.value.merge({collapsing:!1})),e.setIn(i,l)}},{key:"removeItemDataHandle",value:function(e,t){var r=t.parentKeys,n=t.keys,a=t.index,i=r.concat(["data"].concat(o(n))),u=r.concat(["meta"]),s=e.getIn(u),f=s.addChild(r.concat(n).concat([a])),l=void 0;return e=this.resolveKeys(e,i),(l=e.getIn(i))&&c.List.isList(l)?(f&&f.removeFromParent(),e.setIn(i,l.remove(a))):e}},{key:"switchItemHandle",value:function(e,t){var r=t.parentKeys,n=t.keys,a=t.curIndex,i=t.toIndex,c=r.concat(["data"].concat(o(n))),u=r.concat(["meta"]),s=e.getIn(u),f=void 0,l=void 0;if(e=this.resolveKeys(e,c),!(f=e.getIn(c))||f.size<=i||i<0)return e;var p=f.get(a);return f=f.set(a,f.get(i)),f=f.set(i,p),l=s.containPath(r.concat(n).concat([a])),l?l.switchOneToOneFromParent(i):(l=s.containPath(r.concat(n).concat([i])))&&l.switchOneToOneFromParent(a),e.setIn(c,f)}},{key:"moveItemHandle",value:function(e,t){var r=t.parentKeys,n=t.keys,a=t.curIndex,i=t.toIndex,c=r.concat(["data"].concat(o(n))),u=r.concat(["meta"]),s=e.getIn(u),f=s.containPath(r.concat(n).concat([a])),l=void 0;if(e=this.resolveKeys(e,c),!(l=e.getIn(c))||l.size<=i||i<0)return e;var p=l.get(a);return l=l.remove(a),l=l.insert(i-0,p),f&&f.insertToFromParent(i),e.setIn(c,l)}},{key:"updateItemMetaHandle",value:function(e,t){var r=t.parentKeys,n=t.keys,o=t.data,a=r.concat(["meta"]),i=e.getIn(a),s=i.addChild(r.concat(n)),f=s?s.value:null;s&&(s.value=f?s.value.merge(o):Object(c.fromJS)(o));var l=Object.assign({},i,u.a.prototype);return e.setIn(a,l)}},{key:"actions",get:function(){return{createForm:this.createForm,updateItemData:this.updateItemData,updateItemMeta:this.updateItemMeta,addItem:this.addItem,removeItem:this.removeItem,moveToItem:this.moveToItem,switchItem:this.switchItem}}},{key:"reducer",get:function(){var e;return Object(i.createReducer)((e={},n(e,this.createForm,this.createFormHandle.bind(this)),n(e,this.updateItemData,this.updateItemDataHandle.bind(this)),n(e,this.updateItemMeta,this.updateItemMetaHandle.bind(this)),n(e,this.addItem,this.addItemDataHandle.bind(this)),n(e,this.removeItem,this.removeItemDataHandle.bind(this)),n(e,this.switchItem,this.switchItemHandle.bind(this)),n(e,this.moveToItem,this.moveItemHandle.bind(this)),e),this.initialState)}}]),e}()},function(e,t){e.exports=i},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(1),c=r(0),u=r.n(c),s=r(2),f=(r.n(s),r(6)),l=this,p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.a=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){var t=function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return a(r,t),p(r,[{key:"render",value:function(){return u.a.createElement(e,Object.assign({},this.props))}}]),r}(c.PureComponent);return t=i.b([Object(s.compose)(Object(s.withHandlers)({validate:function(e){return function(e,t){return i.a(l,void 0,void 0,regeneratorRuntime.mark(function r(){var n,o,a,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n={dirty:!0,isValid:!1,isLoading:!1},o=setTimeout(function(){f.a.actions.updateItemMeta({parentKeys:e.parentKeys,keys:e.uiSchema.keys,data:{isLoading:!0,isValid:!1,errorText:!1}})},200),r.prev=2,r.next=5,e.ajv.validate(e.uiSchema,t);case 5:if(a=r.sent,n.isValid=a,a){r.next=11;break}throw i=new Error,i.errors=e.ajv.errors,i;case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(2),n.errorText=r.t0.errors?e.ajv.errorsText(r.t0.errors,{dataVar:e.getTitle(e).toString()}):r.t0.message;case 16:return r.prev=16,clearTimeout(o),r.finish(16);case 19:return r.abrupt("return",n);case 20:case"end":return r.stop()}},r,this,[[2,13,16,19]])}))}}}),Object(s.withHandlers)({updateItemData:function(e){return function(e,t,r){f.a.actions.updateItemData({parentKeys:e.parentKeys,keys:e.uiSchema.keys,data:t,meta:r})}},updateItemMeta:function(e){return function(t,r,n){return i.a(l,void 0,void 0,regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.t0=f.a.actions,o.t1=t.parentKeys,o.t2=t.uiSchema.keys,o.t3=n,o.t3){o.next=8;break}return o.next=7,e.validate(t,r);case 7:o.t3=o.sent;case 8:o.t4=o.t3,o.t5={parentKeys:o.t1,keys:o.t2,data:o.t4},o.t0.updateItemMeta.call(o.t0,o.t5);case 11:case"end":return o.stop()}},o,this)}))}}}))],t)}}},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=r(0),u=r.n(c),s=r(2),f=(r.n(s),function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}());t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){return function(c){function l(){o(this,l);var e=a(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments));return e.fieldKey="hocs",e}return i(l,c),f(l,[{key:"render",value:function(){var o=this.props,a=o.uiSchema,i=o.getOptions,c=a.type,f=(i(this.props,"field",c),t.hocs||(a?a.hocs:null)||["theme","field","validate","array","temp"]);f.unshift("utils");var l=s.compose.apply(void 0,n([].concat(n(f)).map(function(t){return"string"!=typeof t?t:e.get(t)()})))(r);return u.a.createElement(l,Object.assign({},this.props))}}]),l}(c.PureComponent)}}},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=r(0),u=r.n(c),s=r(2),f=(r.n(s),function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}());t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tempField:"temps",templates:[]};return function(e){return function(r){function c(){return o(this,c),a(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return i(c,r),f(c,[{key:"render",value:function(){var t=this,r=this.props,o=r.uiSchema,a=r.getOptions;o.options,o.keys;return this.getTemplates().reduce(function(e,r){var o=r.key,i=r.Temp,c=a(t.props,"temp",o),f=s.compose.apply(void 0,n(c.tempHocs||[]))(i);return u.a.createElement(f,{tempKey:o,ajv:t.props.ajv,uiSchema:t.props.uiSchema,schemaId:t.props.schemaId,arrayLevel:t.props.arrayLevel,arrayIndex:t.props.arrayIndex,globalOptions:t.props.globalOptions,ArrayComponent:t.props.ArrayComponent,ArrayItemComponent:t.props.ArrayItemComponent,initArrayComponent:t.props.initArrayComponent,parentKeys:t.props.parentKeys,getTitle:t.props.getTitle,getOptions:t.props.getOptions,getPathKeys:t.props.getPathKeys,children:e})},u.a.createElement(e,Object.assign({},this.props)))}},{key:"getTemplates",value:function(){var e=this.props,r=e.uiSchema,o=e.currentTheme,a=e.getOptions,i=(r.keys,r.type),c=a(this.props,"field",i),u=[],s=void 0;s=t.templates&&t.templates.length>0?t.templates:c[t.tempField]||"default";return function e(t){switch(t.constructor){case String:o.tempFactory.has(t)?u.push({key:t,Temp:o.tempFactory.get(t)}):console.error("不存在"+t+"的temp！");break;case Object:u.push({key:t.name,Temp:t});break;case Array:[].concat(n(s)).reverse().forEach(function(t,r){e(t)})}}(s),u}}]),c}(c.PureComponent)}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var c=r(1),u=r(0),s=r.n(u),f=r(2),l=(r.n(f),r(9)),p=(r.n(l),r(24)),h=(r.n(p),r(4)),y=(r.n(h),function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()),d=Object(p.createSelectorCreator)(p.defaultMemoize,h.is);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:!0,rootReducerKey:["schemaForm"]},r=function(e,r){return d([function(n){var o=t.rootReducerKey.concat([].concat(i(e),["data"],i(r)));if(t.data&&n.hasIn(o)){var a=n.getIn(o);if(void 0!==a)return t.dataLength?a.size:a}},function(n){var o=t.rootReducerKey.concat([].concat(i(e),["meta"]));if(t.meta&&n.hasIn(o)){var a=n.getIn(o),c=a.containPath([].concat(i(e),i(r)));if(c&&c.value)return c.value}}],function(e,t){var r={};return e&&(r.formItemData=e),t&&(r.formItemMeta=t),r})};return function(e){var t=function(t){function i(){return n(this,i),o(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return a(i,t),y(i,[{key:"render",value:function(){var t=this.props.uiSchema||{},n=t.keys,o=void 0===n?[]:n,a=Object(l.connect)(r(this.props.parentKeys,o)),i=a(e);return s.a.createElement(i,Object.assign({},this.props))}}]),i}(u.PureComponent);return t=c.b([Object(f.shouldUpdate)(function(){return!1})],t)}}},function(e,t){e.exports=c},function(e,t,r){"use strict";var n=r(7);r.d(t,"a",function(){return n.a});var o=r(32);r.d(t,"b",function(){return o.a})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.d(t,"a",function(){return p});var i=r(1),c=r(0),u=r.n(c),s=r(27),f=r(28),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.schemaId,r=e.mergeSchemaList,n=e.arrayLevel,o=e.RootComponent,a=e.children,c=i.d(e,["schemaId","mergeSchemaList","arrayLevel","RootComponent","children"]),s=r?r.map(function(e,r){var o=n?n.concat([]):[];return u.a.createElement(f.a,Object.assign({key:r},c,{schemaId:t,uiSchema:e,arrayLevel:o}))}):[];return o?u.a.createElement(o,null,s,a):u.a.createElement("div",null,s,a)}}]),t}(c.PureComponent);p=i.b([s.a],p)},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(2),o=(r.n(n),r(3)),a=Object(n.compose)(Object(n.shouldUpdate)(function(){return!1}),o.a.get("utils")(),o.a.get("merge")())},function(e,t,r){"use strict";var n=r(29);r.d(t,"a",function(){return n.a})},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.d(t,"a",function(){return h});var c=r(1),u=r(0),s=r.n(u),f=r(30),l=(r.n(f),r(31)),p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=function(e){function t(e,r){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return i(t,e),p(t,[{key:"render",value:function(){var e=this.props,t=e.FieldComponent,r=e.uiSchema,o=c.d(e,["FieldComponent","uiSchema"]),a=o.getOptions(this.props,"field",r.field||r.type),i=t;return t?(a.fieldHocs&&a.fieldHocs.length&&(i=f.compose.apply(void 0,n(a.fieldHocs||[]))(t)),s.a.createElement(i,Object.assign({key:r.keys.join("formItem"),uiSchema:r},o))):(console.log(r,"没有找到匹配的field"),null)}}]),t}(u.PureComponent);h=c.b([l.a,c.c("design:paramtypes",[Object,Object])],h)},function(e,t){e.exports=u},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(2),o=(r.n(n),r(3)),a=Object(n.compose)(o.a.get("utils")(),o.a.get("make")())},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=1},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=1},function(e,t,r){"use strict";var n=r(35);r.d(t,"b",function(){return n.a});var o=r(36);r.d(t,"c",function(){return o.a});var a=r(37);r.d(t,"a",function(){return a.a})},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.d(t,"a",function(){return p});var c=r(1),u=r(0),s=r.n(u),f=r(2),l=(r.n(f),function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()),p=function(e){function t(e,r){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.WidgetComponent,r=(e.FieldComponent,e.formItemMeta,e.formItemData,c.d(e,["WidgetComponent","FieldComponent","formItemMeta","formItemData"])),o=r.getOptions(this.props,"field","normal"),a=r.uiSchema.keys,i=t;return t&&a?(o.widgetHocs&&o.widgetHocs.length&&(i=f.compose.apply(void 0,n(o.widgetHocs))(t)),s.a.createElement(i,Object.assign({key:a.join(".")},r))):null}}]),t}(u.PureComponent)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.d(t,"a",function(){return f});var i=r(0),c=r.n(i),u=r(7),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props.uiSchema,t=this.props,r=t.arrayIndex,n=t.arrayLevel,o=t.parentKeys,a=t.globalOptions,i=t.ajv;t.schemaId;return null!==e.children&&e.schemaPath?c.a.createElement(u.a,{arrayIndex:r,arrayLevel:n,schemaId:e.schemaPath,uiSchemas:e.children||["*"],uiSchema:e,parentKeys:o,globalOptions:a,ajv:i}):null}}]),t}(i.PureComponent)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.d(t,"a",function(){return l});var i=r(0),c=r.n(i),u=r(7),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f={width:"100%",height:"100%"},l=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"renderItem",value:function(e){var t=this.props,r=t.parentKeys,n=t.globalOptions,o=t.arrayLevel,a=void 0===o?[]:o,i=t.ajv,s=t.ArrayItemComponent,f=this.props.uiSchema;return null!==f.children&&f.schemaPath?c.a.createElement(u.a,{key:e,arrayIndex:e,uiSchema:f,ArrayItemComponent:s,arrayLevel:a.concat([e]),schemaId:f.schemaPath,uiSchemas:f.children||["-"],parentKeys:r,globalOptions:n,ajv:i}):null}},{key:"render",value:function(){for(var e=this.props,t=(e.uiSchema,e.formItemData),r=[],n=0;n<+t;n++)r.push(this.renderItem(n));return c.a.createElement("div",{style:f},r||null)}}]),t}(i.PureComponent)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(1),c=r(0),u=r.n(c),s=r(9),f=(r.n(s),r(4)),l=r.n(f),p=r(39),h=(r.n(p),r(5)),y=(r.n(h),r(3)),d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),m=y.b.get("schemaForm").actions;t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rootReducerKey:[],parentKeys:[]};return function(t){var r=function(r){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t._validateAll=t.validateAll.bind(t),t}return a(c,r),d(c,[{key:"validateAll",value:function(){return i.a(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,o,a,i,c=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.props.root,n=this.props.ajv.getSchema(this.props.schemaId),o=l.a.fromJS({dirty:!0,isValid:!0,isLoading:!0}),a=l.a.fromJS({isLoading:!1,dirty:!0}),i=this.normalizeDataPath,r){t.next=3;break}return t.abrupt("return");case 3:if(n){t.next=5;break}throw new Error("没有找到对应的"+this.props.schemaId+";");case 5:return t.prev=5,r.forEach(function(e){return e.value?e.value.merge(o):o},!0),m.updateItemMeta({parentKeys:e.parentKeys,keys:[],data:r.value}),t.next=10,n(this.props.data.toJS());case 10:r.value=r.value.merge({isValid:!0}),m.updateItemMeta({parentKeys:e.parentKeys,keys:[],data:r.value}),t.next=22;break;case 14:if(t.prev=14,t.t0=t.catch(5),t.t0 instanceof p.ValidationError){t.next=18;break}return t.abrupt("return",console.error(t.t0));case 18:if(r){t.next=20;break}return t.abrupt("return");case 20:t.t0.errors.forEach(function(e){var t=r.getCurrentKeys().concat(i(c.props.schemaId,e.dataPath)),n=r.addChild(t,l.a.fromJS({}));n&&(n.value=n.value.merge(a).merge({isValid:!1,errorText:e.message}))}),r.value=r.value.merge({isValid:!1,errors:t.t0.errors});case 22:return t.prev=22,r.forEach(function(e){return e.value?e.value.merge(a):e.value},!0),console.log(r.value),m.updateItemMeta({parentKeys:e.parentKeys,keys:[],data:r.value}),t.finish(22);case 27:case"end":return t.stop()}},t,this,[[5,14,22,27]])}))}},{key:"normalizeDataPath",value:function(e,t){var r=t.substring(1).split("/");return r=r.map(function(t,n){if(Number.isInteger(+t)){var o=r.slice(0,n);if(o.unshift(e),h.schemaKeysFactory.has(o.join("/"))){if("array"===h.schemaFieldFactory.get(h.schemaKeysFactory.get(o.join("/"))).type)return+t}}return t})}},{key:"render",value:function(){var e=this.props,r=e.errors,n=e.isValid,o=void 0!==n&&n,a=e.isValidating,i=void 0!==a&&a;return u.a.createElement("div",null,u.a.createElement(t,Object.assign({validateAll:this._validateAll},this.props)),o.toString()+i.toString(),o?null:r?r.map(function(e){return u.a.createElement("div",{key:e.get("dataPath")},e.get("message"))}):null)}}]),c}(c.PureComponent);return r=i.b([Object(s.connect)(function(t){var r=e.rootReducerKey.concat(e.parentKeys).concat(["data"]),n=e.rootReducerKey.concat(e.parentKeys).concat(["meta"]),o=t.getIn(n);return{data:t.getIn(r),root:o,isValid:o.value.get("isValid"),errors:o.value.get("errors"),isValidating:o.value.get("isLoading")}}),i.c("design:paramtypes",[Object])],r)}}},function(e,t){e.exports=s}]).default});
//# sourceMappingURL=index.map